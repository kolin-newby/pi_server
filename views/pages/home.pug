//- home.pug
include ../partials/header.pug

body
    div.container
        div.jumbotron
            h1 Traffic on Campus
        div.page
            h3 Locations
            br
            form(method='POST', action='/select_location')
                if data
                    each location in data
                        if location.volume
                            -
                                const QUIET_CUTOFF = 100;
                                const BUSY_CUTOFF = 200;
                                
                                var status_class = 'color: black;';
                                var status_message = 'No Data';

                                // if closed()

                                if (volume) {
                                    if (volume < QUIET_CUTOFF) {
                                        status_class = 'color: green;';
                                        status_message = 'Quiet';
                                    }
                                    else if (volume > BUSY_CUTOFF) {
                                        status_class = 'color: red;';
                                        status_message = 'Busy';
                                    }
                                    else {
                                        status_class = 'color: yellow;';
                                        status_message = 'Normal';
                                    }
                                }

                                console.log("Class: "+status_class)
                                console.log("Message: "+status_message)

                                return [status_class, status_message];
                                
                        button(type='submit', name='location', value=location.name) #{location.name}
                        | &nbsp : &nbsp
                        span(style=status[0]) #{status[1]}
                        br

    include ../partials/footer.pug